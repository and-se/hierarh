<!DOCTYPE html>
<head>

<meta charset="utf8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{article.header}}</title>

<link rel="stylesheet" type="text/css" href="/static/simple.css" >
<link rel="stylesheet" type="text/css" href="/static/style.css" >


</head>

<body>
    <header>
        <nav>
          <ul class="collections">
              <li><a class="{{'current' if item_type=='cafedra'}}" href="/cafedra">Кафедры</a></li>
              <li><a class="{{'current' if item_type=='episkop'}}" href="/episkop">Епископы</a></li>
          </ul>
        </nav>
    </header>

    <main>
    {% autoescape false %}
    <h1>{{article.header}}</h1>
    {%if article.text %}
    <p>{{article.text}}</p>
    {% endif %}

    <table class="episkops">
    {% for ep in article.episkops %}
    <tr>
        {%if ep is string%}
        <th colspan="3" class="episkops_header">{{ep}}</th>
        {% else %}
        <td>
            {% if ep.inexact %}
                {{'('}}
            {% endif %}
            {{ep.begin_dating or ''}}
        </td>
        <td>{{ep.end_dating or ''}}</td>
        <td>
            {%if ep.episkop_id %}
                <a href="/episkop/{{ep.episkop_id}}">{{ep.episkop}}</a>
            {% else %}
                {{ep.who}}
            {% endif %}
            {% if ep.inexact %}
                    {{')'}}
            {% endif %}
        </td>
        {% endif %}
    </tr>
    {% endfor %}
    </table>

    <ul class="notes">
    {%for note in article.notes%}
    <li>
        <p>
            <span class="note_start" id="note_{{note.num}}">{{note.num}}</span>
            {{note.text}}
        </p>
    </li>
    {%endfor%}
    </ul>

    {% endautoescape %}
    </main>
    <script>
        var links = document.getElementsByClassName("note");
        var notes = document.getElementsByClassName("note_row");
        
        var handleLinkClick = function(event, noteId) {
            event.preventDefault();
            var noteRow = notes[noteId];

            if (noteRow.style.display == 'none') {
                noteRow.style.display = 'table-row';
            } else {
                noteRow.style.display = 'none';
            }
        };

        for (var i = 0; i < links.length; i++) {
            links[i].addEventListener('click', (localI => event => handleLinkClick(event, localI))(i), false);
            notes[i].style.display = 'none';
        }
    </script>
</body>
